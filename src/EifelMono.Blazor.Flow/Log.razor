@using Microsoft.Extensions.Logging
@inject ILoggerFactory Logger

@ChildContent

@code {
    private string _category;
    [Parameter]
    public string Category
    {
        get => (_category ?? (_category = this.GetType().Namespace));
        set => _category = value;
    }

    [Parameter]
    public LogLevel LogLevel { get; set; } = LogLevel.None;

    [Parameter]
    public string Message { get; set; }
    [Parameter]
    public RenderFragment ChildContent { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _logger = Logger.CreateLogger(Category);
    }

    private ILogger _logger;

    protected override void OnAfterRender(bool firstRender)
    {
        _logger.Log(LogLevel, Message);
        base.OnAfterRender(firstRender);
    }
}
